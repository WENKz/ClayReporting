@{
    ViewBag.Title = "Home Page";
    int i = 0;
}

<form method="post">
    <fieldset>
        <legend>Add Customer</legend>
        <div>
            <label for="CompanyName">Company Name:</label>
            <input type="date" name="CompanyName" value="" />
        </div>
        <input type="submit" />
    </fieldset>
</form>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<h2>Graphique Quality/Lot</h2>
<div id="chart_div"></div>

<h2>Graphique Quality/Component</h2>

<div id="chart_div_qc"></div>

<h2>Graphique Performance/Layout</h2>

<div id="chart_div_pl"></div>

<h2>Graphique Nombre de lot/Color</h2>

<div id="chart_div_nc"></div>

@ViewData["date"];
<script>
    var graphC = [];
    var graphQC = [];
    var graphPL = [];
    var graphNC = [];

    @foreach (var std in ViewData["list"] as IDictionary<int, Dictionary<string, dynamic>>)
            {

              <text>

    graphC.push(['@std.Value["lot"]', @std.Value["quality"], '@std.Value["couleur"]']);
    graphQC.push(['@std.Value["composant"]',@std.Value["quality"],'@std.Value["couleur"]']);
    graphPL.push(['@std.Value["layout"]',@std.Value["performance"],'@std.Value["couleur"]']);
    graphNC.push(['@std.Value["couleur"]',@std.Value["lot"],'@std.Value["couleur"]']);

             </text>
            }

    google.charts.load('current', { packages: ['corechart', 'bar'] });


    google.charts.setOnLoadCallback(drawBasic);
    google.charts.setOnLoadCallback(drawGraphQC);
    google.charts.setOnLoadCallback(drawGraphPL);
    google.charts.setOnLoadCallback(drawGraphNC);

    function drawBasic() {

        var newArray = [];

        var countT = graphC.length;
        newArray[0] = ["lot", "Quality", { role: 'style' }];

        for (j = 0; j <= (countT - 1) ; j++) {
            newArray[(j + 1)] = graphC[j];
        }
        var data = google.visualization.arrayToDataTable(newArray);

        var options = {
            vAxis: {
                ticks: [
                    { v: 10, f: 'Low' },
                    { v: 20, f: "Medium" },
                    { v: 30, f: "Hight" }
                ],
                title: 'Quality'

            },
            hAxis: {
                title: 'Numéro de lot',
            }, legend: { position: "none" },
        };

        var chart = new google.visualization.ColumnChart(
          document.getElementById('chart_div'));

        chart.draw(data, options);
    }

    function drawGraphQC() {

        var newArray = [];

        var countT = graphQC.length;
        newArray[0] = ['Component', 'Quality', { role: 'style' }];

        for (j = 0; j <= (countT - 1) ; j++) {
            newArray[(j + 1)] = graphQC[j];
        }
        var data = google.visualization.arrayToDataTable(newArray);

        var options = {
            vAxis: {
                ticks: [
                    { v: 10, f: 'Low' },
                    { v: 20, f: "Medium" },
                    { v: 30, f: "Hight" }
                ],
                title: 'Quality'
            },
            hAxis: {
                title: 'Component',
            }, legend: { position: "none" },
        };

        var chart = new google.visualization.ColumnChart(
          document.getElementById('chart_div_qc'));

        chart.draw(data, options);
    }

    function drawGraphPL() {

        var newArray = [];

        var countT = graphPL.length;
        newArray[0] = ["Layout", "Performance", { role: 'style' }];

        for (j = 0; j <= (countT - 1) ; j++) {
            newArray[(j + 1)] = graphPL[j];
        }

        var data = google.visualization.arrayToDataTable(newArray);

        var options = {
            vAxis: {
                ticks: [
                    { v: 10, f: 'Low' },
                    { v: 20, f: "Medium" },
                    { v: 30, f: "Hight" }
                ],
                title: 'Performance'
            },
            hAxis: {
                title: 'Layout',
            }, legend: { position: "none" },
        };

        var chart = new google.visualization.ColumnChart(
          document.getElementById('chart_div_pl'));

        chart.draw(data, options);
    }

    function drawGraphNC() {

        var newArray = [];

        var countT = graphNC.length;
        newArray[0] = ["Color", "NB lot", { role: 'style' }];

        for (j = 0; j <= (countT - 1) ; j++) {
            newArray[(j + 1)] = graphNC[j];
        }
        var data = google.visualization.arrayToDataTable(newArray);

        var options = {
            vAxis: {

                title: 'NB lot'
            },
            hAxis: {
                title: 'Color',
            }, legend: { position: "none" },
        };

        var chart = new google.visualization.ColumnChart(
          document.getElementById('chart_div_nc'));

        chart.draw(data, options);
    }
</script>
